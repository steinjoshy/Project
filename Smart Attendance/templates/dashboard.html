{% extends "base.html" %}

{% block title %}Dashboard - Smart Attendance System{% endblock %}

{% block content %}
<div class="card">
    <h2 style="margin-bottom: 20px; color: #333;">Today's Overview</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px;">
            <h3 style="font-size: 14px; opacity: 0.9; margin-bottom: 10px;">Total Students</h3>
            <p style="font-size: 32px; font-weight: bold;">{{ stats.total_students }}</p>
        </div>
        <div style="background: #28a745; color: white; padding: 20px; border-radius: 10px;">
            <h3 style="font-size: 14px; opacity: 0.9; margin-bottom: 10px;">Present Today</h3>
            <p style="font-size: 32px; font-weight: bold;">{{ stats.present_today }}</p>
        </div>
        <div style="background: #dc3545; color: white; padding: 20px; border-radius: 10px;">
            <h3 style="font-size: 14px; opacity: 0.9; margin-bottom: 10px;">Absent Today</h3>
            <p style="font-size: 32px; font-weight: bold;">{{ stats.absent_today }}</p>
        </div>
    </div>
    
    <p style="color: #666; margin-bottom: 20px;">Date: <strong>{{ stats.today_date }}</strong></p>
    
    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
        <a href="{{ url_for('attendance', date=stats.today_date) }}" class="btn btn-primary">View Today's Attendance</a>
        <a href="{{ url_for('download', date=stats.today_date) }}" class="btn btn-success">Download CSV</a>
    </div>
</div>

<div class="card">
    <h2 style="margin-bottom: 20px; color: #333;">Today's Attendance Records</h2>
    {% if attendance %}
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Student ID</th>
                <th>Time</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for record in attendance %}
            <tr>
                <td>{{ record[5] if record|length >= 6 else 'N/A' }}</td>
                <td>{{ record[1] }}</td>
                <td>{{ record[3] }}</td>
                <td><span style="color: #28a745; font-weight: bold;">{{ record[4] }}</span></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="color: #666; text-align: center; padding: 40px;">No attendance records for today yet.</p>
    {% endif %}
</div>
{% endblock %}

